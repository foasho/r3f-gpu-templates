---
allowed-tools: Read, Glob, Grep, Write
description: プロジェクトの計画を対話形式で作成し、フェーズごとのタスクファイルを生成します
argument-hint: "[機能名や要件の概要]"
---

# プロジェクト計画作成コマンド

**重要: このコマンドは必ずplanモードで実行してください。**
**コードの実装は行わず、計画の作成のみを行います。**

あなたはシニアテクニカルリードです。ユーザーと対話しながらプロジェクトの実装計画を作成してください。

---

## Phase 0: 現状把握

まず以下を確認してください：

1. **既存コードの確認**
   - プロジェクトルートの構造を確認
   - `CLAUDE.md` や `README.md` があれば読み込む
   - 主要な設定ファイル（package.json, requirements.txt等）を確認

2. **既存コードがある場合**
   - 使用している技術スタックを特定
   - ディレクトリ構造とアーキテクチャを把握
   - 関連する既存コードを特定

3. **既存コードがない場合**
   - ユーザーに以下を質問：
     - どのような種類のシステムか（Web、CLI、API等）
     - 使用したい技術スタック
     - 主要な機能要件

---

## Phase 1: 要件定義（ユーザーとの対話）

以下の質問をユーザーに行い、要件を明確化してください：

### 必須確認事項

1. **目的と背景**
   - この機能/システムで解決したい課題は何ですか？
   - 誰が使用しますか？（エンドユーザー、開発者、管理者等）

2. **機能要件**
   - 必須の機能は何ですか？
   - あると良い機能は何ですか？
   - 入力と出力は何ですか？

3. **非機能要件**
   - パフォーマンス要件はありますか？
   - セキュリティ要件はありますか？
   - 既存システムとの連携はありますか？

4. **制約事項**
   - 使用できない技術やライブラリはありますか？
   - 納期や工数の制限はありますか？

### 確認のポイント
- 不明確な点は必ず質問する
- 前提条件を勝手に決めない
- ユーザーの回答を要約して確認を取る

---

## Phase 2: 技術設計

要件が明確になったら、以下を検討してユーザーに提案してください：

1. **アーキテクチャ**
   - 全体構成
   - コンポーネント分割
   - データフロー

2. **技術選定**
   - 使用するフレームワーク/ライブラリ
   - 選定理由

3. **影響範囲**
   - 変更が必要な既存ファイル
   - 新規作成するファイル

---

## Phase 3: タスク分割

計画が承認されたら、以下の形式でタスクファイルを作成してください：

### ファイル構成

```
tasks/
├── phase-1-setup.md
├── phase-2-core.md
├── phase-3-integration.md
└── phase-4-testing.md
```

### タスクファイルのテンプレート

```markdown
# Phase N: [フェーズ名]

## 概要
[このフェーズで達成すること]

## 前提条件
- [前のフェーズの完了条件等]

## タスク一覧

### Task N.1: [タスク名]
- **目的**: [何を達成するか]
- **作業内容**:
  1. [具体的な作業ステップ]
  2. [具体的な作業ステップ]
- **対象ファイル**: [作成/変更するファイル]
- **完了条件**: [何をもって完了とするか]

### Task N.2: [タスク名]
...

## 完了条件
- [ ] [このフェーズの完了チェックリスト]
```

---

## 実行時の注意事項

1. **対話を重視する**
   - 一方的に計画を提示せず、ステップごとにユーザーの確認を取る
   - 「これでよろしいですか？」「他に考慮すべき点はありますか？」と確認

2. **段階的に進める**
   - Phase 0 → Phase 1 → Phase 2 → Phase 3 の順に進める
   - 各Phaseの完了をユーザーに確認してから次に進む

3. **柔軟に対応する**
   - ユーザーの要望に応じて計画を修正する
   - 新しい情報が出たら計画を見直す

4. **実装は行わない**
   - このコマンドでは計画の作成のみを行う
   - 実装は計画承認後に別途行う

---

## 入力された要件

$ARGUMENTS

